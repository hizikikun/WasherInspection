# GPU/CPU個別選択機能

## ✅ 実装完了

統合アプリケーションでGPUとCPUを個別に選択できるようになりました。

## 🎯 機能概要

### クイック選択（従来通り）
- [1] 軽量（省エネモード）
- [2] 標準（バランス）
- [3] 高性能（推奨）⭐
- [4] 最大性能（フル活用）

### GPU/CPU個別選択（新機能）
- GPUレベルを個別に選択
- CPUレベルを個別に選択
- それぞれ独立して設定可能

## 📊 選択可能なレベル

### GPUレベル
| レベル | Batch Size | 混合精度 | 説明 |
|--------|-----------|---------|------|
| 軽量 | 8 | 有効 | メモリ使用量が少ない |
| 標準 | 16 | 有効 | バランスが良い |
| 高性能 | 32 | 有効 | 速度と精度のバランス ⭐推奨 |
| 最大性能 | 64 | 無効（フル精度） | 最高の精度と速度 |

### CPUレベル
| レベル | Workers | Max Queue Size | Multiprocessing | 説明 |
|--------|---------|---------------|-----------------|------|
| 軽量 | 1 | 5 | 無効 | CPU使用率が低い |
| 標準 | 4 | 10 | 有効 | バランスが良い |
| 高性能 | 8 | 20 | 有効 | 速度と精度のバランス ⭐推奨 |
| 最大性能 | 16 | 50 | 有効 | 最大CPU使用率 |

## 🚀 使い方

### 統合アプリケーションから

1. **学習タブ**を開く
2. **クイック選択**または**GPU/CPU個別選択**を選択
3. **GPUレベル**と**CPUレベル**をそれぞれ選択
4. **学習開始**ボタンをクリック

### スクリプトから

```bash
python scripts/train_4class_sparse_ensemble.py
```

実行時に：
1. リソース選択画面が表示される
2. `5`を選択するとGPU/CPU個別選択モード
3. GPUレベルを選択（l/m/h/x）
4. CPUレベルを選択（l/m/h/x）

## 📈 組み合わせ例

### 例1: GPU重視（GPU最大、CPU軽量）
- **GPU**: 最大性能（Batch: 64）
- **CPU**: 軽量（Workers: 1）
- **用途**: GPUを最大限活用し、CPUは抑える

### 例2: CPU重視（GPU軽量、CPU最大）
- **GPU**: 軽量（Batch: 8）
- **CPU**: 最大性能（Workers: 16）
- **用途**: CPUを最大限活用（GPUがない場合など）

### 例3: バランス（GPU高性能、CPU高性能）
- **GPU**: 高性能（Batch: 32）
- **CPU**: 高性能（Workers: 8）
- **用途**: バランスの取れた設定 ⭐推奨

### 例4: 省エネ（GPU軽量、CPU軽量）
- **GPU**: 軽量（Batch: 8）
- **CPU**: 軽量（Workers: 1）
- **用途**: 他の作業をしながら学習

## ⚙️ エポック数とパテンスの自動調整

GPU/CPUの平均レベルから自動的に決定されます：

| 平均レベル | Max Epochs | Patience |
|-----------|-----------|----------|
| 低（<1） | 100 | 20 |
| 中（1-2） | 150 | 25 |
| 高（2-3） | 200 | 30 |
| 最大（≥3） | 300 | 50 |

## 💡 推奨設定

### 一般的な用途
**GPU: 高性能、CPU: 高性能**（統合アプリのデフォルト）
- 速度と精度のバランスが良い
- GPU/CPUを効率的に使用

### GPUが強い場合
**GPU: 最大性能、CPU: 標準**
- GPUを最大限活用
- CPUは控えめに

### CPUのみの場合
**GPU: 軽量、CPU: 最大性能**
- CPUを最大限活用
- データ読み込みを高速化

### 省エネモード
**GPU: 軽量、CPU: 軽量**
- リソース使用を最小限に
- 他の作業と併用可能

## ✅ まとめ

- ✅ GPU/CPUを個別に選択可能
- ✅ クイック選択も利用可能
- ✅ 統合アプリケーションでGUIから選択
- ✅ スクリプトからも対話的に選択可能

これで、用途に応じて最適なGPU/CPU設定を選択できます！



















